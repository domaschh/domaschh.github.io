---
import BlogCard from '@/components/BlogCard.astro'
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import ProjectCard from '@/components/ProjectCard.astro'
import { buttonVariants } from '@/components/ui/button'
import { SITE } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { getNrProjects, getRecentPosts } from '@/lib/data-utils'

const blog = await getRecentPosts(SITE.featuredPostCount)
const projects = await getNrProjects(3)
---

<Layout class="max-w-3xl">
  <PageHead slot="head" title="Home" />
  <section>
    <div class="flex flex-col space-y-1.5 pt-6">
      <h3 class="text-3xl leading-none font-medium">Ser·was</h3>
      <p class="text-muted-foreground text-sm">
        /ˈsɛʁvɐs/ &bull; <span class="font-medium">greeting</span>
      </p>
    </div>
    <div class="pt-0">
      <p class="text-muted-foreground text-m mb-2">
        I'm Thomas and I'm a software engineer from Austria. I like all things
        performance and have experience with systems engineering, compilers and
        distributed systems.
      </p>
      <p class="text-muted-foreground text-m mb-2">
        Random ideas and things I've encountered are curated here (some of it at
        least). If you like what you or you just want to say hi see feel free to
        reach out via. LinkedIn or Mail.
      </p>
    </div>
  </section>
  <section>
    <div class="flex flex-col space-y-1.5">
      <h3 class="text-3xl leading-none font-medium">Background</h3>
      <div class="grid gap-6">
        {projects.map((project) => <ProjectCard project={project} />)}
      </div>
      <div class="flex justify-center">
        <Link
          href="/details"
          class={buttonVariants({ variant: 'ghost' }) + ' group'}
        >
          Full experience <span
            class="ml-1.5 transition-transform group-hover:translate-x-1"
            >&rarr;</span
          >
        </Link>
      </div>
    </div>
  </section>
  <!-- <section class="flex flex-col gap-y-4">
    <h2 class="text-2xl font-medium">Random ideas</h2>
    <ul class="flex flex-col gap-y-4">
      {
        blog.map((post) => (
          <li>
            <BlogCard entry={post} />
          </li>
        ))
      }
    </ul>
    <div class="flex justify-center">
      <Link
        href="/blog"
        class={buttonVariants({ variant: 'ghost' }) + ' group'}
      >
        All <span class="ml-1.5 transition-transform group-hover:translate-x-1"
          >&rarr;</span
        >
      </Link>
    </div>
  </section> -->
</Layout>
